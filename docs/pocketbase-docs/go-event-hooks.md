Source: https://pocketbase.io/docs/go-event-hooks/

---

Event hooks
The standard way to modify PocketBase is through
 event hooks in your Go code.
 All hooks have 3 main methods:

- [Bind(handler)](https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/hook#Hook.Bind)
 adds a new handler to the specified event hook. A handler has 3 fields:
 Id (optional) - the name of the handler (could be used
 as argument for Unbind)
- Priority (optional) - the execution order of the handler
 (if empty fallbacks to the order of registration in the code).
- Func (required) - the handler function.

- [BindFunc(func)](https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/hook#Hook.BindFunc)
 is similar to Bind but registers a new handler from just the provided function.

 The registered handler is added with a default 0 priority and the id is autogenerated (the returned string
 value).
- [Trigger(event, oneOffHandlerFuncs...)](https://pkg.go.dev/github.com/pocketbase/pocketbase/tools/hook#Hook.Trigger)
 triggers the event hook.
 This method rarely has to be called manually by users.
 To remove an already registered hook handler, you can use the handler id and pass it to
 Unbind(id) or remove all handlers with
 UnbindAll() (!including system handlers).
 All hook handler functions share the same func(e T) error signature and expect
 the user to call e.Next() if they want to proceed with the execution chain.
 If you need to access the app instance from inside a hook handler, prefer using the
 e.App field instead of reusing a parent scope app variable because the hook could be part
 of a DB transaction and can cause deadlock.
 Also avoid using global mutex locks inside a hook handler because it could be invoked recursively
 (e.g. cascade delete) and can cause deadlock.

 You can explore all available hooks below:

### [App hooks](#app-hooks)

 OnBootstrap hook is triggered when initializing the main
 application resources (db, app settings, etc).

 Note that attempting to access the database before the e.Next() call will result in an error.

```go
package main

import (
 "log"

 "github.com/pocketbase/pocketbase"
 "github.com/pocketbase/pocketbase/core"
)

func main() {
 app := pocketbase.New()

 app.OnBootstrap().BindFunc(func(e *core.BootstrapEvent) error {
 if err := e.Next(); err != nil {
 return err
 }

 // e.App

 return nil
 })

 if err := app.Start(); err != nil {
 log.Fatal(err)
 }
}
```

 OnServe hook is triggered when the app web server is started
 (after starting the TCP listener but before initializing the blocking serve task),
 allowing you to adjust its options and attach new routes or middlewares.

```go
package main

import (
 "log"
 "net/http"

 "github.com/pocketbase/pocketbase"
 "github.com/pocketbase/pocketbase/apis"
 "github.com/pocketbase/pocketbase/core"
)

func main() {
 app := pocketbase.New()

 app.OnServe().BindFunc(func(e *core.ServeEvent) error {
 // register new "GET /hello" route
 e.Router.GET("/hello", func(e *core.RequestEvent) error {
 return e.String(200, "Hello world!")
 }).Bind(apis.RequireAuth())

 return e.Next()
 })

 if err := app.Start(); err != nil {
 log.Fatal(err)
 }
}
```

### [Record model hooks](#record-model-hooks)

 These are lower level Record model hooks and could be triggered from anywhere (custom console command, scheduled cron job, when calling e.Save(record), etc.) and therefore they have no access to the request context!

 If you want to intercept the builtin Web APIs and to access their request body, query parameters, headers or the request auth state, then please use the designated
 [Record *Request hooks](#request-hooks)
 .

 OnRecordCreate is a Record proxy model hook of OnModelCreate.

 OnRecordCreate is triggered every time when a new Record is being created,
 e.g. triggered by App.Save().

 Operations BEFORE the e.Next() execute before the Record validation
 and the INSERT DB statement.

 Operations AFTER the e.Next() execute after the Record validation
 and the INSERT DB statement.

```go
package main

import (
 "log"

 "github.com/pocketbase/pocketbase"
 "github.com/pocketbase/pocketbase/core"
)

func main() {
 app := pocketbase.New()

 // fires for every record
 app.OnRecordCreate().BindFunc(func(e *core.RecordEvent) error {
 // e.App
 // e.Record

 return e.Next()
 })

 // fires only for "users" and "articles" records
 app.OnRecordCreate("users", "articles").BindFunc(func(e *core.RecordEvent) error {
 // e.App
 // e.Record

 return e.Next()
 })

 if err := app.Start(); err != nil {
 log.Fatal(err)
 }
}
```

### [Request hooks](#request-hooks)

 The request hooks are triggered only when the corresponding API request endpoint is accessed.

 OnRecordsListRequest hook is triggered on each API Records list request.
 Could be used to validate or modify the response before returning it to the client.

```go
package main

import (
 "log"

 "github.com/pocketbase/pocketbase"
 "github.com/pocketbase/pocketbase/core"
)

func main() {
 app := pocketbase.New()

 // fires for every collection
 app.OnRecordsListRequest().BindFunc(func(e *core.RecordsListRequestEvent) error {
 // e.App
 // e.Collection
 // e.Records
 // e.Result
 // and all RequestEvent fields...

 return e.Next()
 })

 // fires only for "users" and "articles" collections
 app.OnRecordsListRequest("users", "articles").BindFunc(func(e *core.RecordsListRequestEvent) error {
 // e.App
 // e.Collection
 // e.Records
 // e.Result
 // and all RequestEvent fields...

 return e.Next()
 })

 if err := app.Start(); err != nil {
 log.Fatal(err)
 }
}
```

See full documentation at: https://pocketbase.io/docs/go-event-hooks/
